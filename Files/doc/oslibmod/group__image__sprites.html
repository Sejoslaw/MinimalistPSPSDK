<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Simili sprite system</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__image__sprites.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Simili sprite system</h1>  </div>
<div class="ingroups"><a class="el" href="group__image.html">Images</a></div></div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__image__sprites.html#ga56d3cb5f2cc11e2c02ce4b48e465650b">oslSetImageFrameSize</a> (<a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *img, u16 width, u16 height)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__image__sprites.html#ga7f8fcb84e5c3adb73e149b1f7018e56e">oslSetImageFrame</a> (<a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *img, int frame)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A basic system allowing you to cut your images just as if they were sprites. Remember that the maximum size of an image is 512x512! </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga56d3cb5f2cc11e2c02ce4b48e465650b"></a><!-- doxytag: member="drawing.h::oslSetImageFrameSize" ref="ga56d3cb5f2cc11e2c02ce4b48e465650b" args="(OSL_IMAGE *img, u16 width, u16 height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oslSetImageFrameSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u16&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Defines the size of a frame in an image. This prepares the image for an use as a sprite sheet. In a sprite sheet, you have to arrange your sprites (small images) in a grid, whose dimensions are fixed. That is, if you decide for example that the sprite size is 29x37, EVERY sprite must have the same size, and be padded if it doesn't. Sprites are placed from left to right, and then on the next line from top to bottom (just like the text you are reading). For example, a 64x64 image containing 32x32 sprites (total: 4 sprites) would have the following disposition:</p>
<div class="fragment"><pre class="fragment">sprite 1 | sprite 2
---------|---------
sprite 3 | sprite 4

That is, the following coordinates:

0, 0     | 32, 0
---------|---------
0, 32    | 32, 32
</pre></div><p><b>Important:</b> The maximum size of an image is 512x512! See considerations with <a class="el" href="group__image__creation.html#ga120ad0461bc8369f9431bff653d25217">oslCreateImage</a>. </p>

</div>
</div>
<a class="anchor" id="ga7f8fcb84e5c3adb73e149b1f7018e56e"></a><!-- doxytag: member="drawing.h::oslSetImageFrame" ref="ga7f8fcb84e5c3adb73e149b1f7018e56e" args="(OSL_IMAGE *img, int frame)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oslSetImageFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>To make a smart use of this feature, remember that you can always code macros to simplify and wrap your code. </p>
<div class="fragment"><pre class="fragment"><span class="comment">//Remember to never use a name beginning by oslSomething for your functions</span>
<span class="comment">//because it may exist some day in OSLib, and it will break your code!</span>

<span class="comment">//Draws a specific frame of an image</span>
<span class="keywordtype">void</span> DrawImageFrame(<a class="code" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *img, <span class="keywordtype">int</span> frame)          {
        <a class="code" href="group__image__sprites.html#ga7f8fcb84e5c3adb73e149b1f7018e56e">oslSetImageFrame</a>(img, frame);
        <a class="code" href="group__image__drawing.html#gaf6b7b3f250d1fd2d961d55686528a276">oslDrawImage</a>(img);
}

<span class="comment">//Alternative method using a macro (won&#39;t work with Visual Studio, except if you remove the parenthesis,</span>
<span class="comment">//but they are needed because of a bug with GCC)</span>
<span class="preprocessor">#define DrawImageFrame(img, frame)                      ({ oslSetImageFrame(img, frame); oslDrawImage(img); })</span>
<span class="preprocessor"></span>
<span class="comment">//If you really want to do an inline thing (the same way as a macro), use this instead:</span>
<span class="keyword">extern</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> DrawImageFrame(<a class="code" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *img, <span class="keywordtype">int</span> frame)            {
        <a class="code" href="group__image__sprites.html#ga7f8fcb84e5c3adb73e149b1f7018e56e">oslSetImageFrame</a>(img, frame);
        <a class="code" href="group__image__drawing.html#gaf6b7b3f250d1fd2d961d55686528a276">oslDrawImage</a>(img);
}

<span class="comment">//Draws a specific frame of an image at a specified location (like a real sprite)</span>
<span class="keywordtype">void</span> DrawImageFrameXY(<a class="code" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *img, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> frame)          {
        <a class="code" href="group__image__sprites.html#ga7f8fcb84e5c3adb73e149b1f7018e56e">oslSetImageFrame</a>(img, frame);
        <a class="code" href="group__image__drawing.html#ga0d0f05ee1a7f2d97edf735b4e668aec2">oslDrawImageXY</a>(img, x, y);
}

<span class="comment">//Load an image specifying the frame size directly</span>
<span class="keywordtype">void</span> LoadSpriteFilePNG(<span class="keywordtype">char</span> *filename, <span class="keywordtype">int</span> location, <span class="keywordtype">int</span> pixelFormat, <span class="keywordtype">int</span> frameWidth, <span class="keywordtype">int</span> frameHeight)          {
        <a class="code" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *img = <a class="code" href="group__image__creation.html#gaf193a8cfb42ac15bdf1a291e16fef428">oslLoadImageFile</a>(filename, location, pixelFormat);
        <span class="keywordflow">if</span> (img)
                <a class="code" href="group__image__sprites.html#ga56d3cb5f2cc11e2c02ce4b48e465650b">oslSetImageFrameSize</a>(frameWidth, frameHeight);
        <span class="keywordflow">return</span> img;
}

<span class="keywordtype">void</span> main()             {
        <span class="comment">//Initialization</span>
        [...]

        <span class="comment">//30x40 pixels per sprite</span>
        <a class="code" href="struct_o_s_l___i_m_a_g_e.html">OSL_IMAGE</a> *myImage;
        myImage = LoadSpriteFilePNG(<span class="stringliteral">&quot;test.png&quot;</span>, <a class="code" href="group__image.html#gga163a37d9c3999633b0dc387e15453845a40b7f6fda376d3390a38f2d2629a39f7" title="In RAM.">OSL_IN_RAM</a>, <a class="code" href="group__image.html#ggab3528cc93235f479e65017b9cc0a2259a5a0a8c1193ea60a42d6c6dcd6fb62f18" title="15 bits, 5 bits per component, 1 alpha bit">OSL_PF_5551</a>, 30, 40);
        [...]

        <span class="comment">//Draw the frame nÂ°2 (that is, the third sprite) at location (0, 0) (top-left corner of the screen).</span>
        DrawImageFrameXY(myImage, 0, 0, 2);
        [...]
} 
</pre></div> 
</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Tue May 17 2011 10:54:47 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>

</body>
</html>
