<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Synchronization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__main__sync.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>Synchronization</h1>  </div>
<div class="ingroups"><a class="el" href="group__main.html">Main</a></div></div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__sync.html#gafd44ec49156286bce5417eb5b35db024">oslSetFrameskip</a>(val)&#160;&#160;&#160;(osl_frameskip = val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__sync.html#ga128e5db1825c42eae5de5b286f22bf63">oslSetMaxFrameskip</a>(val)&#160;&#160;&#160;(osl_maxFrameskip = val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__sync.html#ga9c9eb6cf5e822e09e8143edd20bd387a">oslSetVSync</a>(val)&#160;&#160;&#160;(osl_vsyncEnabled = val)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__sync.html#ga8e6b8c0ff4151f04435dbeb769c5fca3">oslSyncFrame</a>()&#160;&#160;&#160;oslSyncFrameEx(osl_frameskip,osl_maxFrameskip,osl_vsyncEnabled)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__sync.html#ga0f9ad2df3c9e36e2e2755327c6e01034">oslEndFrame</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__sync.html#ga130de21fe916a62758d9c876404f8910">oslSyncFrameEx</a> (int frameskip, int max_frameskip, int vsync)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__sync.html#ga8cea144c5083a6fdcbd8923f28b8b43f">oslSetFramerate</a> (int framerate)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__sync.html#ga0da5e66ddaaa874e0ba4729ee895c9c5">oslWaitVSync</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__main__sync.html#ga9a62ef8c6081da62463bb2a3c09ca948">osl_quit</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Contains routines for synchronizing your game. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gafd44ec49156286bce5417eb5b35db024"></a><!-- doxytag: member="oslib.h::oslSetFrameskip" ref="gafd44ec49156286bce5417eb5b35db024" args="(val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define oslSetFrameskip</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val</td><td>)</td>
          <td>&#160;&#160;&#160;(osl_frameskip = val)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the current fix frameskipping value. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>1 = enables auto frameskip 2 or more: enables fixed skipping (val-1 frames out of val are skipped) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga128e5db1825c42eae5de5b286f22bf63"></a><!-- doxytag: member="oslib.h::oslSetMaxFrameskip" ref="ga128e5db1825c42eae5de5b286f22bf63" args="(val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define oslSetMaxFrameskip</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val</td><td>)</td>
          <td>&#160;&#160;&#160;(osl_maxFrameskip = val)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the maximum frameskip value. If you set a too high value, the game may become unusable when lagging, if you set a too low value, frameskip is no more useful. </p>

</div>
</div>
<a class="anchor" id="ga9c9eb6cf5e822e09e8143edd20bd387a"></a><!-- doxytag: member="oslib.h::oslSetVSync" ref="ga9c9eb6cf5e822e09e8143edd20bd387a" args="(val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define oslSetVSync</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">val</td><td>)</td>
          <td>&#160;&#160;&#160;(osl_vsyncEnabled = val)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the VSync parameter. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>0: Automatic VSync (enabled if the game is not lagging). 1: VSync always enabled. +4: If you add 4, with a frameskip &gt; 1, synchronizes to the wanted framerate, e.g. 2 -&gt; 30 fps (DON'T USE THIS ANYMORE) +0: Else, fixes the minimum frameskip (e.g. 2: the game will run at 60 fps, 30 images per second, that is one frame out of two is skipped) +8: Alternative synchronization method without VSync +16: Do not swap buffers. Handy if you want temporary to "disable double buffering". </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8e6b8c0ff4151f04435dbeb769c5fca3"></a><!-- doxytag: member="oslib.h::oslSyncFrame" ref="ga8e6b8c0ff4151f04435dbeb769c5fca3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define oslSyncFrame</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;oslSyncFrameEx(osl_frameskip,osl_maxFrameskip,osl_vsyncEnabled)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Synchronization. Call it to the end of a frame. A frame is one step when animating your game. The PSP LCD refreshes at 60 images per second (and thus, you'll have to generate 60 frames per second). This function uses the frameskip &amp; vsync parameters defined above. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A boolean value indicating if you're in late.</dd></dl>
<p>Note: When you're indicated to be in late, you should skip the rendering to speed up things, else your game will slow down. Usually the whole render is surrounded by a "if (!skip)" block, and when skip is true, the render is completely skipped. Skip is the return value from oslSyncFrame.</p>
<p>Here is the structure of an automatically frameskipped program: </p>
<div class="fragment"><pre class="fragment"><span class="comment">//This variable holds whether a frame should be skipped or not</span>
<span class="keywordtype">int</span> skip = 0;
<span class="comment">//Enable frameskipping, 0 frame out of 1 is skipped by default (60 fps)</span>
<a class="code" href="group__main__sync.html#gafd44ec49156286bce5417eb5b35db024">oslSetFrameskip</a>(1);
<span class="comment">//But skip a maximum of 3 frames out of 4, else the game seems very laggy</span>
<a class="code" href="group__main__sync.html#ga128e5db1825c42eae5de5b286f22bf63">oslSetMaxFrameskip</a>(4);

<span class="comment">//Our main loop</span>
<span class="keywordflow">while</span>(1)                {
        <span class="comment">//If skip is 1, then we should skip rendering to speed up things</span>
        <span class="keywordflow">if</span> (!skip)              {
                <span class="comment">//Begin drawing</span>
                <a class="code" href="group__drawing__main.html#gaee41f26ce4d9733a781efa9c0c2b9543">oslStartDrawing</a>();
                <span class="comment">//We can now draw as much as we want</span>
                <a class="code" href="group__drawing__shapes.html#ga050574332d7045466f92a0db0f6ba0af">oslDrawFillRect</a>(0, 0, 100, 100, <a class="code" href="group__drawing__color.html#gabef0f315b5b7260110139f4582fb03bb">RGBA</a>(0, 0, 255, 128));
                <a class="code" href="group__text.html#gab8b9a065d4d305c3b2174a5e505aab16">oslDrawString</a>(0, 0, <span class="stringliteral">&quot;Hello!&quot;</span>);
                <span class="comment">//We have now finished with drawing</span>
                <a class="code" href="group__drawing__main.html#ga31e0a6c7bb6f568ff89bb14b1ad33924">oslEndDrawing</a>();
        }

        <span class="comment">//End of a frame</span>
        <a class="code" href="group__main__sync.html#ga0f9ad2df3c9e36e2e2755327c6e01034">oslEndFrame</a>();
        <span class="comment">//Synchronize to ensure the game runs at 60 fps</span>
        skip = <a class="code" href="group__main__sync.html#ga8e6b8c0ff4151f04435dbeb769c5fca3">oslSyncFrame</a>();
}
</pre></div> 
</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga0f9ad2df3c9e36e2e2755327c6e01034"></a><!-- doxytag: member="oslib.h::oslEndFrame" ref="ga0f9ad2df3c9e36e2e2755327c6e01034" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oslEndFrame </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Call this function when a frame has ended, just before a call to oslSyncFrame or oslWaitVSync or anything. <b>Important:</b> If you are calling this function, you do not need to call <a class="el" href="group__audio__play.html#gaf14ff120349055f647b7ad677d867d23">oslAudioVSync</a> anymore. Newer programs should always call <a class="el" href="group__main__sync.html#ga0f9ad2df3c9e36e2e2755327c6e01034">oslEndFrame</a> instead. </p>

</div>
</div>
<a class="anchor" id="ga130de21fe916a62758d9c876404f8910"></a><!-- doxytag: member="oslib.h::oslSyncFrameEx" ref="ga130de21fe916a62758d9c876404f8910" args="(int frameskip, int max_frameskip, int vsync)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int oslSyncFrameEx </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>frameskip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_frameskip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vsync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Same as oslSyncFrame but with all parameters set in one call. This method is a bit cleaner because the other one stores parameters in global variables and oslSyncFrame calls oslSyncFrameEx with them as arguments. </p>

</div>
</div>
<a class="anchor" id="ga8cea144c5083a6fdcbd8923f28b8b43f"></a><!-- doxytag: member="oslib.h::oslSetFramerate" ref="ga8cea144c5083a6fdcbd8923f28b8b43f" args="(int framerate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oslSetFramerate </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>framerate</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the framerate for <a class="el" href="group__main__sync.html#ga8e6b8c0ff4151f04435dbeb769c5fca3">oslSyncFrame(Ex)</a>. This can be any value from 1 to 60. For example, use 50 to simulate a PAL (european) game. </p>

</div>
</div>
<a class="anchor" id="ga0da5e66ddaaa874e0ba4729ee895c9c5"></a><!-- doxytag: member="oslib.h::oslWaitVSync" ref="ga0da5e66ddaaa874e0ba4729ee895c9c5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void oslWaitVSync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Waits for the VSync (60 times per second), synchronizing your game. This is a simplier and less efficient method than oslSyncFrame. </p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga9a62ef8c6081da62463bb2a3c09ca948"></a><!-- doxytag: member="oslib.h::osl_quit" ref="ga9a62ef8c6081da62463bb2a3c09ca948" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="group__main__sync.html#ga9a62ef8c6081da62463bb2a3c09ca948">osl_quit</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This variable is set to TRUE to indicate the application should exit (happens when the user pressed HOME and selected Yes). You should always keep an eye on this variable, clean up everything and then quit when this variable has become TRUE. </p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated on Tue May 17 2011 10:54:47 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </li>
    </ul>
  </div>

</body>
</html>
